/**
 * Cachomatic: An AngularJS Local Storage Module
 * @author Ryan Page <ryanpager@gmail.com>
 * @version v1.0.0
 * @see https://github.com/ryanpager/cachomatic
 * @license https://github.com/ryanpager/cachomatic/blob/master/LICENSE
 */
var bind=function(t,e){return function(){return t.apply(e,arguments)}};!function(){"use strict";var t;return t=function(){function t(t,e){this.isExpired=bind(this.isExpired,this),this.setExpiration=bind(this.setExpiration,this),this.getExpiration=bind(this.getExpiration,this),this.setObject=bind(this.setObject,this),this.getObject=bind(this.getObject,this),this.set=bind(this.set,this),this.get=bind(this.get,this),this.clearAll=bind(this.clearAll,this),this.clear=bind(this.clear,this),this.exists=bind(this.exists,this),this.getCacheKey=bind(this.getCacheKey,this),this.getCachePrefix=bind(this.getCachePrefix,this),this.$window=t.$get(),this.moment=e}return t.prototype.$inject=["$windowProvider","moment"],t.prototype.cachePrefix=null,t.prototype.setCachePrefix=function(t){return this.cachePrefix=t},t.prototype.getCachePrefix=function(){return this.cachePrefix},t.prototype.getCacheKey=function(t){var e;return e=this.getCachePrefix(),null===e?t:e+"-"+t},t.prototype.getExpirationCacheKey=function(t){return this.getCacheKey(t)+"-expiration"},t.prototype.exists=function(t){return null==this.$window.localStorage[this.getCacheKey(t)]?!1:!0},t.prototype.clear=function(t){var e;return e=this.getExpiration(t),null!=e&&delete this.$window.localStorage[this.getExpirationCacheKey(t)],this.exists(t)?delete this.$window.localStorage[this.getCacheKey(t)]:void 0},t.prototype.clearAll=function(){var t,e,i,r;e=this.$window.localStorage,i=[];for(t in e)r=e[t],i.push(t.indexOf(this.getCachePrefix())>=0?delete this.$window.localStorage[t]:void 0);return i},t.prototype.get=function(t){return this.isExpired(t)?(this.clear(t),null):this.exists(t)?this.$window.localStorage[this.getCacheKey(t)]:null},t.prototype.set=function(t,e,i){return null==i&&(i=null),this.$window.localStorage[this.getCacheKey(t)]=e,null!=i?this.setExpiration(t,i):void 0},t.prototype.getObject=function(t){return JSON.parse(this.get(t))},t.prototype.setObject=function(t,e,i){return this.set(t,JSON.stringify(e),i)},t.prototype.getExpiration=function(t){var e;return e=this.getExpirationCacheKey(t),null==this.$window.localStorage[e]?null:this.$window.localStorage[e]},t.prototype.setExpiration=function(t,e){var i;return i=this.getExpirationCacheKey(t),this.$window.localStorage[i]=this.moment().add(parseInt(e),"s").valueOf()},t.prototype.isExpired=function(t){var e;return e=this.getExpiration(t),e&&this.moment().valueOf()>parseInt(e)?!0:!1},t.prototype.$get=function(){return{getCachePrefix:this.getCachePrefix,exists:this.exists,clear:this.clear,clearAll:this.clearAll,get:this.get,set:this.set,getObject:this.getObject,setObject:this.setObject,getExpiration:this.getExpiration,setExpiration:this.setExpiration,isExpired:this.isExpired}},t}(),angular.module("sbb.cachomatic",[]).constant("moment",moment).provider("Cachomatic",t)}();